"use strict";(self.webpackChunk_availity_availity_react=self.webpackChunk_availity_availity_react||[]).push([[3627],{"./node_modules/@availity/resolve-url/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>index_default,vh:()=>is_absolute_url_default});var is_absolute_url_default=url=>{if("string"!=typeof url)throw new TypeError(`Expected a \`string\`, got \`${typeof url}\``);return/^[a-z][a-z\d+.-]*:/.test(url)};function isCharacterAllowedAfterRelativePathSegment(character){return!character||"#"===character||"?"===character||"/"===character}function removeDotSegments(path){const segmentBuffers=[];let i=0;for(;i<path.length;)switch(path[i]){case"/":if("."===path[i+1])if("."===path[i+2]){if(!isCharacterAllowedAfterRelativePathSegment(path[i+3])){segmentBuffers.at(-1).push(path.substr(i)),i=path.length;break}segmentBuffers.pop(),path[i+3]||segmentBuffers.push([]),i+=3}else{if(!isCharacterAllowedAfterRelativePathSegment(path[i+2])){segmentBuffers.at(-1).push(path.substr(i)),i=path.length;break}path[i+2]||segmentBuffers.push([]),i+=2}else segmentBuffers.push([]),i+=1;break;case"#":case"?":0===segmentBuffers.length&&segmentBuffers.push([]),segmentBuffers.at(-1).push(path.substr(i)),i=path.length;break;default:0===segmentBuffers.length&&segmentBuffers.push([]),segmentBuffers.at(-1).push(path[i]),i+=1}return`/${segmentBuffers.map((buffer=>buffer.join(""))).join("/")}`}function removeDotSegmentsOfPath(iri,colonPosition){let searchOffset=colonPosition+1;colonPosition>=0?"/"===iri[colonPosition+1]&&"/"===iri[colonPosition+2]&&(searchOffset=colonPosition+3):"/"===iri[0]&&"/"===iri[1]&&(searchOffset=2);const pathSeparator=iri.indexOf("/",searchOffset);if(pathSeparator<0)return iri;return iri.substr(0,pathSeparator)+removeDotSegments(iri.substr(pathSeparator))}var index_default=({relative="",base})=>{if(is_absolute_url_default(relative))return relative;if(!base){const{origin}=window.location;base=`${origin}/`}return function resolve(relativeIRI,baseIRI=""){const baseFragmentPos=baseIRI.indexOf("#");if(baseFragmentPos>0&&(baseIRI=baseIRI.substr(0,baseFragmentPos)),0===relativeIRI.length)return baseIRI;if(0===relativeIRI.indexOf("?")){const baseQueryPos=baseIRI.indexOf("?");return baseQueryPos>0&&(baseIRI=baseIRI.substr(0,baseQueryPos)),baseIRI+relativeIRI}if(0===relativeIRI.indexOf("#"))return baseIRI+relativeIRI;if(0===baseIRI.length)return removeDotSegmentsOfPath(relativeIRI,relativeIRI.indexOf(":"));const valueColonPos=relativeIRI.indexOf(":");if(valueColonPos>=0)return removeDotSegmentsOfPath(relativeIRI,valueColonPos);const baseColonPos=baseIRI.indexOf(":");if(baseColonPos<0)throw new Error(`Found invalid baseIRI '${baseIRI}' for value '${relativeIRI}'`);const baseIRIScheme=baseIRI.substr(0,baseColonPos+1);if(0===relativeIRI.indexOf("//"))return baseIRIScheme+removeDotSegmentsOfPath(relativeIRI,valueColonPos);let baseSlashAfterColonPos;if(baseIRI.indexOf("//",baseColonPos)!==baseColonPos+1)return baseSlashAfterColonPos=baseIRI.indexOf("/",baseColonPos+1),baseIRI.length>baseColonPos+1?`${baseIRI}/${removeDotSegmentsOfPath(relativeIRI,valueColonPos)}`:baseIRIScheme+removeDotSegmentsOfPath(relativeIRI,valueColonPos);if(baseSlashAfterColonPos=baseIRI.indexOf("/",baseColonPos+3),baseSlashAfterColonPos<0)return baseIRI.length>baseColonPos+3?`${baseIRI}/${removeDotSegmentsOfPath(relativeIRI,valueColonPos)}`:baseIRIScheme+removeDotSegmentsOfPath(relativeIRI,valueColonPos);if(0===relativeIRI.indexOf("/"))return baseIRI.substr(0,baseSlashAfterColonPos)+removeDotSegments(relativeIRI);let baseIRIPath=baseIRI.substr(baseSlashAfterColonPos);const baseIRILastSlashPos=baseIRIPath.lastIndexOf("/");return baseIRILastSlashPos>=0&&baseIRILastSlashPos<baseIRIPath.length-1&&(baseIRIPath=baseIRIPath.substr(0,baseIRILastSlashPos+1),"."===relativeIRI[0]&&"."!==relativeIRI[1]&&"/"!==relativeIRI[1]&&relativeIRI[2]&&(relativeIRI=relativeIRI.substr(1))),relativeIRI=removeDotSegments(relativeIRI=baseIRIPath+relativeIRI),baseIRI.substr(0,baseSlashAfterColonPos)+relativeIRI}(relative,base)}},"./packages/change-password/node_modules/@availity/api-axios/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>index_default,xV:()=>AvMicroserviceApi});var qs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/qs/lib/index.js"),qs__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_3__),_availity_resolve_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@availity/resolve-url/dist/index.mjs"),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/axios/lib/axios.js"),lodash_merge__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/merge.js"),lodash_merge__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_0__),lodash_set__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/lodash/set.js"),lodash_set__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash_set__WEBPACK_IMPORTED_MODULE_4__),__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__reflectGet=Reflect.get,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(null!=source&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target},__publicField=(obj,key,value)=>__defNormalProp(obj,"symbol"!=typeof key?key+"":key,value),__superGet=(cls,obj,key)=>__reflectGet(__getProtoOf(cls),key,obj),__async=(__this,__arguments,generator)=>new Promise(((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())})),options_default={API:{path:"/api",url:null,name:null,version:"/v1",cache:!0,api:!0,polling:!0,pollingIntervals:[1e3,2e3,5e3,1e4],pollingMethod:"GET",headers:{"X-Response-Encoding-Context":"NONE"},sessionBust:!0,withCredentials:!0},MS:{path:"/ms/api/availity/internal",url:null,name:null,version:null,cache:!1,api:!0,polling:!1,pollingIntervals:[1e3,2e3,5e3,1e4],pollingMethod:"POST",headers:{"X-Response-Encoding-Context":"NONE"},sessionBust:!1,withCredentials:!0}},AvApi=class{constructor(config){if(!config)throw new Error("[config] must be defined");const _a=config,{http}=_a,options=__objRest(_a,["http"]);this.http=http||axios__WEBPACK_IMPORTED_MODULE_1__.A,this.defaultConfig=lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()({},options_default.API,options)}config(config={}){return lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()({},this.defaultConfig,config)}addParams(params={},config={},newObj=!0){const output=newObj?__spreadValues({params:{}},config):config;return newObj||(output.params=output.params||{}),output.params=__spreadValues(__spreadValues({},output.params),params),output}cacheParams(config){const params={};return config.cacheBust&&(params.cacheBust=this.getCacheBustVal(config.cacheBust,(()=>Date.now()))),config.pageBust&&(params.pageBust=this.getCacheBustVal(config.pageBust,(()=>this.getPageBust()))),config.sessionBust&&(params.sessionBust=this.getCacheBustVal(config.sessionBust,(()=>this.getSessionBust()||this.getPageBust()))),this.addParams(params,config,!1)}getSessionBust(){return window.localStorage.getItem("avCacheBust")}getCacheBustVal(cacheBust,defaultFn){if(cacheBust)return"boolean"==typeof cacheBust&&defaultFn?defaultFn():"function"==typeof cacheBust?cacheBust():cacheBust}getPageBust(){return void 0===this.pageBustValue&&this.setPageBust(),this.pageBustValue}setPageBust(value){this.pageBustValue=void 0===value?Date.now():value}getUrl(config,id=""){if(!config.api)return config.url;const{path,version,name,url}=config;let parts=[];return parts=name?["",path,version,name,id]:[url,id],parts.join("/").replaceAll(/\/+/g,"/").replace(/\/$/,"")}getRequestUrl(){return this.getUrl(this.config())}getLocation(response){const{config,headers={}}=response,{getHeader,base}=config,{location,Location}=headers,locationUrl=getHeader?getHeader(response,"Location"):location||Location;return(0,_availity_resolve_url__WEBPACK_IMPORTED_MODULE_2__.Ay)({relative:locationUrl,base})}shouldPoll(response){if(!(null==response?void 0:response.config))return!1;const{attempt=0,polling,pollingIntervals=[]}=response.config;return polling&&202===response.status&&attempt<pollingIntervals.length}getQueryResultKey(data){return Object.keys(data).find((key=>Array.isArray(data[key])))}getResult(data){return data[this.getQueryResultKey(data)]}request(config,afterResponse){return __async(this,null,(function*(){config.polling&&(config.attempt=config.attempt||0,config.attempt+=1);const response=yield this.http(config);return this.onResponse(response,afterResponse)}))}onResponse(response,afterResponse){return __async(this,null,(function*(){if(this.shouldPoll(response)){const newConfig=this.config(response.config),pollingUrl=this.getLocation(response);if(pollingUrl)return newConfig.method=newConfig.pollingMethod,newConfig.url=pollingUrl,newConfig.cache=!1,yield new Promise((resolve=>{setTimeout(resolve,newConfig.pollingIntervals[newConfig.attempt]||1e3)})),this.request(newConfig,afterResponse)}return afterResponse?afterResponse(response):response}))}sendBeacon(data,config){return __async(this,null,(function*(){if(!data)throw new Error("called method without [data]");(config=this.config(config)).method="POST",config.url=this.getUrl(config),config.data=data;const beforeFunc=this.beforeCreate||this.beforePost;if(beforeFunc&&(config.data=beforeFunc(config.data)),navigator.sendBeacon){if(navigator.sendBeacon(config.url,new Blob([config.data],{type:"application/x-www-form-urlencoded"})))return Promise.resolve()}return this.request(config,this.afterCreate||this.afterPost)}))}create(data,config){return __async(this,null,(function*(){if(!data)throw new Error("called method without [data]");(config=this.config(config)).method="POST",config.url=this.getUrl(config),config.data=data;const beforeFunc=this.beforeCreate||this.beforePost;return beforeFunc&&(config.data=beforeFunc(config.data)),this.request(config,this.afterCreate||this.afterPost)}))}post(data,config){return __async(this,null,(function*(){return this.create(data,config)}))}postGet(data,config){return __async(this,null,(function*(){if(!data)throw new Error("called method without [data]");return(config=this.config(config)).method="POST",config.headers=config.headers||{},config.headers["X-HTTP-Method-Override"]="GET",config.headers["Content-Type"]=config.headers["Content-Type"]||"application/x-www-form-urlencoded",config.url=this.getUrl(config),config.data=data,this.beforePostGet&&(config.data=this.beforePostGet(config.data)),"string"!=typeof config.data&&"application/x-www-form-urlencoded"===config.headers["Content-Type"]&&(config.data=qs__WEBPACK_IMPORTED_MODULE_3___default().stringify(config.data,{encode:!1,arrayFormat:"repeat",indices:!1,allowDots:!0})),this.request(config,this.afterPostGet)}))}get(id,config){return __async(this,null,(function*(){if(!id)throw new Error("called method without [id]");return(config=this.config(config)).method="GET",config.url=this.getUrl(config,id),config=this.cacheParams(config),this.request(config,this.afterGet)}))}query(config){return __async(this,null,(function*(){return(config=this.config(config)).method="GET",config.url=this.getUrl(config),config=this.cacheParams(config),this.request(config,this.afterQuery)}))}getPage(){return __async(this,arguments,(function*(page=1,config={},limit){var _a;const offset=(page-1)*(limit=limit||(null==(_a=config.params)?void 0:_a.limit)||50);return this.query(this.addParams({offset,limit},config,!1))}))}all(config){return __async(this,null,(function*(){const response=yield this.query(config),key=this.getQueryResultKey(response.data),result=response.data[key]||[],limit=(response.data.limit||result.length<=response.data.totalCount)&&Math.min(result.length,response.data.totalCount)||1,totalPages=Math.ceil(response.data.totalCount/limit);if(totalPages>1){const otherPages=[];for(let i=0;i<totalPages-1;i+=1)otherPages[i]=i+2;const pages=yield Promise.all(otherPages.map((page=>__async(this,null,(function*(){return(yield this.getPage(page,config,limit)).data[key]||[]})))));return[...result,...pages].flat()}return result}))}update(id,data,config){return __async(this,null,(function*(){"string"!=typeof id&&"number"!=typeof id&&(config=data,data=id,id=""),(config=this.config(config)).method="PUT",config.url=this.getUrl(config,id),config.data=data;const beforeFunc=this.beforeUpdate||this.beforePut;return beforeFunc&&(config.data=beforeFunc(config.data)),this.request(config,this.afterUpdate||this.afterPut)}))}put(...args){return __async(this,null,(function*(){return this.update(...args)}))}patch(id,data,config){return __async(this,null,(function*(){"string"!=typeof id&&"number"!=typeof id&&(config=data,data=id,id=""),(config=this.config(config)).method="PATCH",config.url=this.getUrl(config,id),config.data=data;const beforeFunc=this.beforePatch;return beforeFunc&&(config.data=beforeFunc(config.data)),this.request(config,this.afterPatch)}))}remove(id,config){return __async(this,null,(function*(){"string"!=typeof id&&"number"!=typeof id&&(config=id,id=""),(config=this.config(config)).method="DELETE",config.url=this.getUrl(config,id);const beforeFunc=this.beforeRemove||this.beforeDelete;return beforeFunc&&(config=beforeFunc(config)),this.request(config,this.afterRemove||this.afterDelete)}))}delete(...args){return __async(this,null,(function*(){return this.remove(...args)}))}},AvMicroserviceApi=class extends AvApi{constructor(config){super(config);const _a=config,{http}=_a,options=__objRest(_a,["http"]);this.defaultConfig=lodash_merge__WEBPACK_IMPORTED_MODULE_0___default()({},options_default.MS,options)}getUrl(config,id=""){const{path,version,name,id:configId,url}=this.config(config),parts=url?[url,path,version||"",name]:[path,version||"",name];(id||configId)&&parts.push(id||configId);const newUrl=parts.join("/");return url?newUrl.replaceAll(/([^:]\/)\/+/g,"$1"):newUrl.replaceAll(/\/+/g,"/").replace(/^\/+/,"/").replace(/\/+$/,"")}},parseValue=(new class extends AvApi{constructor(config){super(__spreadValues({name:"codes"},config))}},new class extends AvApi{constructor(config){super(__spreadValues({path:"/api/sdk/platform",name:"/disclaimers"},config))}getDisclaimers(id,config){return __async(this,null,(function*(){const queryConfig=this.addParams({id},config);return this.query(queryConfig)}))}},value=>null==value?value:value.toString()),flattenObject=ob=>Object.keys(ob).reduce(((toReturn,k)=>{if("[object Date]"===Object.prototype.toString.call(ob[k]))toReturn[k]=ob[k].toJSON();else if(ob[k]&&"object"==typeof ob[k]){const flatObject=flattenObject(ob[k]),isArray=Array.isArray(ob[k]);for(const k2 of Object.keys(flatObject))toReturn[`${k}${isArray?k2.replace(/^(\d+)(\..*)?/,"[$1]$2"):`.${k2}`}`]=parseValue(flatObject[k2])}else toReturn[k]=parseValue(ob[k]);return toReturn}),{}),flatten_object_default=flattenObject,avUserApi=(new class extends AvMicroserviceApi{constructor(config){super(__spreadValues({name:"spc/analytics/log"},config))}send(level,entries){delete entries.level;const flattened=flatten_object_default({level,entries});flattened.X_Client_ID=this.clientId,flattened.X_XSRF_TOKEN=document.cookie.replace(/(?:(?:^|.*;\s*)XSRF-TOKEN\s*=\s*([^;]*).*$)|^.*$/,"$1");return Object.keys(flattened).map((key=>{const name=key.replaceAll(/\[\d+]/g,"[]"),value=flattened[key];return`${name}=${encodeURIComponent(value)}`})).join("&")}debug(entries){return __async(this,null,(function*(){return this.sendBeacon(this.send("debug",entries))}))}info(entries){return __async(this,null,(function*(){return this.sendBeacon(this.send("info",entries))}))}warn(entries){return __async(this,null,(function*(){return this.sendBeacon(this.send("warn",entries))}))}error(entries){return __async(this,null,(function*(){return this.sendBeacon(this.send("error",entries))}))}},new class extends AvMicroserviceApi{constructor(config){super(__spreadValues({name:"core/vault/upload/v1",headers:{"Content-Type":void 0}},config))}uploadFile(data,config){return __async(this,null,(function*(){if(!config.customerId||!config.clientId)throw new Error("[config.customerId] and [config.clientId] must be defined");return(config=this.config(config)).headers["X-Availity-Customer-ID"]=config.customerId,config.headers["X-Client-ID"]=config.clientId,this.create(data,config)}))}},new class extends AvMicroserviceApi{constructor(config){super(__spreadValues({name:"platform/file-upload-delivery/v1/batch/deliveries",headers:{"Content-Type":"application/json"},polling:!0,pollingMethod:"GET"},config))}uploadFilesDelivery(data,config){return __async(this,null,(function*(){if(!config.customerId||!config.clientId)throw new Error("[config.customerId] and [config.clientId] must be defined");return(config=this.config(config)).headers["X-Availity-Customer-ID"]=config.customerId,config.headers["X-Client-ID"]=config.clientId,this.create(data||{},config)}))}getLocation(response){const baseUrl=super.getLocation(response),{id}=response.data;return!id||baseUrl.endsWith(id)?`${baseUrl}`:`${baseUrl}/${id}`}},new class extends AvApi{constructor(config){super(__spreadValues({name:"log-messages"},config))}send(level,entries){delete entries.level;const flattened=flatten_object_default({level,entries});flattened.X_Client_ID=this.clientId,flattened.X_XSRF_TOKEN=document.cookie.replace(/(?:(?:^|.*;\s*)XSRF-TOKEN\s*=\s*([^;]*).*$)|^.*$/,"$1");return Object.keys(flattened).map((key=>{const name=key.replaceAll(/\[\d+]/g,"[]"),value=flattened[key];return`${name}=${encodeURIComponent(value)}`})).join("&")}debug(entries){return __async(this,null,(function*(){return this.sendBeacon(this.send("debug",entries))}))}info(entries){return __async(this,null,(function*(){return this.sendBeacon(this.send("info",entries))}))}warn(entries){return __async(this,null,(function*(){return this.sendBeacon(this.send("warn",entries))}))}error(entries){return __async(this,null,(function*(){return this.sendBeacon(this.send("error",entries))}))}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api/sdk/platform",name:"navigation/spaces"},config))}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api",name:"notifications"},config))}deleteByTopic(topic,config){return __async(this,null,(function*(){const removeConfig=this.addParams({topicId:topic},config);return this.remove(removeConfig)}))}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api/sdk/platform",name:"users"},config))}me(config){return __async(this,null,(function*(){return(yield this.get("me",config)).data}))}}),avUserPermissionsApi=new class extends AvApi{constructor(config){super(__spreadValues({path:"api/internal",name:"axi-user-permissions",paramsSerializer:params=>qs__WEBPACK_IMPORTED_MODULE_3___default().stringify(params,{arrayFormat:"repeat"})},config))}afterQuery(response){var _a;return(null==(_a=null==response?void 0:response.data)?void 0:_a.axiUserPermissions)||[]}getPermissions(permissionId,region){return __async(this,null,(function*(){return this.query({params:{permissionId,region}})}))}},index_default=(new class _AvOrganizationsApi extends AvApi{constructor(config){super(__spreadValues({path:"api/sdk/platform",name:"organizations"},config)),__publicField(this,"previousPermissionIds",[]),__publicField(this,"previousRegionId",""),__publicField(this,"userPermissions",[])}queryOrganizations(user,config){return __async(this,null,(function*(){const queryConfig=this.addParams({userId:user.id},config);return this.query(queryConfig)}))}getOrganizations(config){return __async(this,null,(function*(){var _a;if(null==(_a=null==config?void 0:config.params)?void 0:_a.userId)return this.query(config);const user=yield avUserApi.me();return this.queryOrganizations(user,config)}))}postGet(data,config,additionalPostGetArgs){return __async(this,null,(function*(){if(additionalPostGetArgs){this.region=void 0;const{permissionIds}=additionalPostGetArgs;if("string"==typeof data){const dataTemp=qs__WEBPACK_IMPORTED_MODULE_3___default().parse(data),{region}=dataTemp;region&&(this.region=region,delete dataTemp.region),permissionIds&&(dataTemp.permissionId=permissionIds),data=qs__WEBPACK_IMPORTED_MODULE_3___default().stringify(dataTemp,{arrayFormat:"repeat"})}else if("object"==typeof data){const{region}=data;region&&(this.region=region,delete data.region),permissionIds&&(data.permissionId=permissionIds)}const{data:organizationsData}=yield __superGet(_AvOrganizationsApi.prototype,this,"postGet").call(this,data,config),{organizations,limit,offset,totalCount}=organizationsData,authorizedOrgs=yield this.getFilteredOrganizations(additionalPostGetArgs,data);return{data:{authorizedFilteredOrgs:organizations.filter((org=>authorizedOrgs.some((authOrg=>authOrg.id===org.id)))),totalCount,limit,offset}}}return __superGet(_AvOrganizationsApi.prototype,this,"postGet").call(this,data,config)}))}getFilteredOrganizations(additionalPostGetArgs,data){return __async(this,null,(function*(){const{resourceIds=[],permissionIds}=additionalPostGetArgs;"string"==typeof data&&(data=qs__WEBPACK_IMPORTED_MODULE_3___default().parse(data));const{permissionId}=data;let permissionIdsToUse=permissionIds||permissionId;permissionIdsToUse=this.sanitizeIds(permissionIdsToUse);const resourceIdsToUse=this.sanitizeIds(resourceIds),resourceIdsArray=Array.isArray(resourceIdsToUse)?resourceIdsToUse:[resourceIdsToUse],permissionIdsOR=Array.isArray(permissionIdsToUse)?permissionIdsToUse:[permissionIdsToUse];if(this.region!==this.previousRegionId||!this.arePermissionsEqual(permissionIdsOR)){const{data:{axiUserPermissions:userPermissions}}=yield avUserPermissionsApi.postGet({permissionId:permissionIdsOR,region:this.region});if(!userPermissions)throw new Error("avUserPermissions call failed");this.userPermissions=userPermissions.reduce(((accum,cur)=>(accum[cur.id]=cur,accum)),{}),this.previousPermissionIds=permissionIdsOR,this.previousRegionId=this.region}const authorizedOrgs=permissionIdsOR.reduce(((accum,permissionIdOR)=>{if(Array.isArray(permissionIdOR)){const matchedOrgs=permissionIdOR.reduce(((matchedANDOrgsByPerm,permissionIdAND,index)=>{if(this.userPermissions[permissionIdAND])for(const org of this.userPermissions[permissionIdAND].organizations)0===index?matchedANDOrgsByPerm[org.id]=org:matchedANDOrgsByPerm[org.id]&&(matchedANDOrgsByPerm[org.id].resources=[...matchedANDOrgsByPerm[org.id].resources,...org.resources]);return matchedANDOrgsByPerm=Object.keys(matchedANDOrgsByPerm).filter((orgId=>!!this.userPermissions[permissionIdAND]&&this.userPermissions[permissionIdAND].organizations.some((org=>org.id===orgId)))).reduce(((obj,orgId)=>(obj[orgId]=matchedANDOrgsByPerm[orgId],obj)),{})}),{});for(const orgId of Object.keys(matchedOrgs))accum[orgId]?accum[orgId].resources=[...accum[orgId].resources,...matchedOrgs[orgId].resources]:(accum[orgId]=matchedOrgs[orgId],accum[orgId].match=!1)}else if(this.userPermissions[permissionIdOR])for(const org of this.userPermissions[permissionIdOR].organizations)accum[org.id]?accum[org.id].resources=[...accum[org.id].resources,...org.resources]:(accum[org.id]=org,accum[org.id].match=!1);return accum}),{});if(0===resourceIdsArray.length)for(const orgId of Object.keys(authorizedOrgs))authorizedOrgs[orgId].match=!0;else resourceIdsArray.forEach((resourceIdOR=>{if(Array.isArray(resourceIdOR)){for(const orgId of Object.keys(authorizedOrgs))if(authorizedOrgs[orgId]){resourceIdOR.every((resId=>authorizedOrgs[orgId].resources.some((res=>res.id===resId))))&&(authorizedOrgs[orgId].match=!0)}}else for(const orgId of Object.keys(authorizedOrgs)){!authorizedOrgs[orgId].resources.some((res=>res.id===resourceIdOR))&&resourceIdOR||(authorizedOrgs[orgId].match=!0)}}));return Object.keys(authorizedOrgs).reduce(((accum,orgId)=>(authorizedOrgs[orgId].match&&accum.push(authorizedOrgs[orgId]),accum)),[])}))}arePermissionsEqual(permissionId){const permissionArray=[];if("string"==typeof permissionId||"number"==typeof permissionId)permissionArray.push(permissionId);else if(Array.isArray(permissionId))for(const permissionOR of permissionId)if(Array.isArray(permissionOR))for(const permissionAND of permissionOR)permissionArray.push(permissionAND);else permissionArray.push(permissionOR);const prevPermissionArray=[];if("string"==typeof this.previousPermissionIds||"number"==typeof this.previousPermissionIds)prevPermissionArray.push(this.previousPermissionIds);else if(Array.isArray(this.previousPermissionIds))for(const permissionOR of this.previousPermissionIds)if(Array.isArray(permissionOR))for(const permissionAND of permissionOR)prevPermissionArray.push(permissionAND);else prevPermissionArray.push(permissionOR);const idSet=new Set(permissionArray),idSetPrev=new Set(prevPermissionArray),idSetCombined=new Set([...permissionArray,...prevPermissionArray]);return idSet.size===idSetPrev.size&&idSet.size===idSetCombined.size}sanitizeIds(unsanitized){if("string"==typeof unsanitized)return unsanitized;if("number"==typeof unsanitized)return`${unsanitized}`;if(Array.isArray(unsanitized))return unsanitized.map((dirty=>this.sanitizeIds(dirty)));throw new TypeError("permission/resourcesId(s) must be either an array of ids, a string, or a number")}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api/utils",name:"pdfs"},config))}onPdf(response){window.location=response.data.links.pdf.href}getPdf(data,config){return __async(this,null,(function*(){if(!data.applicationId||!data.fileName||!data.html)throw new Error("[applicationId], [fileName] and [html] must be defined");const response=yield this.post(data,config);return this.onPdf(response),response}))}},new class extends AvMicroserviceApi{constructor(config){var a;super((a=__spreadValues({},config),__defProps(a,__getOwnPropDescs({name:"spc/pdf/"}))))}getUrl(config,id=""){const{path,version,name,id:configId}=this.config(config);let parts=[path,version||"",name];return(id||configId)&&(parts=[path,version||"",name,id||configId]),parts.join("/").replaceAll(/\/+/g,"/")}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api/sdk/platform",name:"permissions"},config))}getPermissions(id,region){return __async(this,null,(function*(){return this.query({params:{id,region}})}))}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api/internal",name:"providers"},config))}getProviders(customerId,config){return __async(this,null,(function*(){const queryConfig=this.addParams({customerId},config);return this.query(queryConfig)}))}normalize(providers){const cloned=[...providers];for(const provider of cloned)provider.name=provider.businessName||`${provider.lastName}, ${provider.firstName}`;return cloned}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api/sdk/platform",name:"regions",sessionBust:!1,pageBust:!0},config)),__publicField(this,"afterUpdate",(response=>(this.setPageBust(),response)))}getQueryResultKey(){return"regions"}getRegions(config){return __async(this,null,(function*(){var _a;if(null==(_a=null==config?void 0:config.params)?void 0:_a.userId)return this.query(config);const user=yield avUserApi.me(),queryConfig=this.addParams({userId:user.id},config);return this.query(queryConfig)}))}getCurrentRegion(){return __async(this,null,(function*(){return this.query({params:{currentlySelected:!0}})}))}},new class extends AvMicroserviceApi{constructor(config){super(__spreadValues({name:"epdm/configuration-service/epdm/v1/route-configuration"},config))}getConfiguration(transactionTypeCode,submissionModeCode,payerId){return __async(this,null,(function*(){return this.query({params:{transactionTypeCode,submissionModeCode,payerId}})}))}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api/utils",name:"settings",sessionBust:!1,pageBust:!0},config))}getApplication(applicationId,config){return __async(this,null,(function*(){var _a;if(!applicationId)throw new Error("[applicationId] must be defined");if(null==(_a=null==config?void 0:config.params)?void 0:_a.userId){const queryConfig2=this.addParams({applicationId},config);return this.query(queryConfig2)}const user=yield avUserApi.me(),queryConfig=this.addParams({applicationId,userId:user.id},config);return this.query(queryConfig)}))}setApplication(applicationId,data,config){return __async(this,null,(function*(){var _a,_b;if("string"!=typeof applicationId&&"number"!=typeof applicationId&&(config=data,data=applicationId,applicationId=""),!applicationId&&!(null==(_a=null==data?void 0:data.scope)?void 0:_a.applicationId))throw new Error("[applicationId] must be defined");if(null==(_b=null==data?void 0:data.scope)?void 0:_b.userId)return data.scope.applicationId=applicationId,this.update(data,config);const user=yield avUserApi.me();return(data=data||{}).scope=data.scope||{},data.scope.applicationId=applicationId,data.scope.userId=user.id,this.update(data,config)}))}},new class extends AvMicroserviceApi{constructor(config){super(__spreadValues({name:"spc/slotmachine/graphql"},config))}query(data,variables){return this.create({query:data,variables})}},new class extends AvApi{constructor(config){super(__spreadValues({path:"api/sdk/platform",name:"spaces"},config))}parseSpaceId(query){const pairs=query.substr(1).split("&");let spaceId="";if(Array.isArray(pairs))for(const item of pairs){const pair=item.split("=");"spaceId"===pair[0]&&(spaceId=pair[1]&&decodeURIComponent(pair[1]))}return spaceId}getSpaceName(spaceId){return __async(this,null,(function*(){if(!spaceId)throw new Error("[spaceId] must be defined");return(yield this.get(spaceId)).data.name}))}},new class extends AvMicroserviceApi{constructor(config){super(__spreadValues({name:"spc/analytics/telemetry"},config))}send(level,data){lodash_set__WEBPACK_IMPORTED_MODULE_4___default()(data,"telemetryBody.level",level);const flattened=flatten_object_default(data);return Object.keys(flattened).map((key=>{const name=key.replaceAll(/\[\d+]/g,"[]"),value=flattened[key];return`${name}=${encodeURIComponent(value)}`})).join("&")}debug(data){return this.sendBeacon(this.send("debug",data))}info(data){return this.sendBeacon(this.send("info",data))}warn(data){return this.sendBeacon(this.send("warn",data))}error(data){return this.sendBeacon(this.send("error",data))}},new class extends AvMicroserviceApi{constructor(config){super(__spreadValues({name:"spc/web/graphql"},config))}},AvApi)}}]);